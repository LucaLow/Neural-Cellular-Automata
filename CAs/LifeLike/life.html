<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>WebGPU Life</title>
  <link rel="stylesheet" href="style.css"> <!-- Link to the CSS file -->
</head>

<div class="text-column">
  <h1>Game of Life</h1>
</div>

<!-- Buttons corresponding to key clicks -->
<button id="play">Play/Pause</button>
<button id="next">Next Frame</button>

<!-- Input Box for Simulation Parameters -->
<div class="input-container">
  <input type="text" id="simulationInput" placeholder="Enter rulestring :3">
  <button id="submitInput">Submit</button>
</div>


<body>
  <div>
    <canvas width="1024" height="1024" />
  </div>

  <script type="module">
    // imports
    import main from "./life.js";
    import { EventManager } from "./managers/EventManager.js";

    // this main() is responsible for running the cellular automata
    main()

    // Setting up event bindings
    document.getElementById('play').addEventListener('click', EventManager.playPause);
    document.getElementById('next').addEventListener('click', EventManager.moveOneFrame);
    document.getElementsByTagName("body")[0].addEventListener("keydown", EventManager.keyListener);

    // this one is annoying. i want it in event manager too though
    // parsing newly inputted rule strings
    document.getElementById('submitInput').addEventListener('click', function () {
      const inputText = document.getElementById('simulationInput').value;
      // Call a function from life.js and pass the inputText
      EventManager.newRuleString = true
      EventManager.ruleString = inputText
      console.log(inputText)
      EventManager.forcedUpdate()
    });
  </script>
</body>

</html>